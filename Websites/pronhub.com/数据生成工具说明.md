# 数据生成工具 - 使用说明

## 🎯 工具介绍

`generate_data.py` 是一个专门用于从数据库重新生成 `data` 文件夹下所有采集文件的独立工具。

## 🚀 快速开始

### 方法一：使用批处理文件（推荐新手）
双击运行 `quick_generate.bat`，按提示选择操作即可。

### 方法二：命令行使用

#### 常用命令
```bash
# 查看数据库统计
python generate_data.py --stats

# 重新生成最新10个视频
python generate_data.py --limit 10

# 重新生成所有数据
python generate_data.py

# 强制更新已存在文件
python generate_data.py --limit 20 --update

# 处理指定视频
python generate_data.py --viewkey 65f9642b4a5f8
```

## 📊 数据源说明

### HTML数据库（默认，推荐）
- 从原始HTML重新解析，数据最完整
- 支持获取最新解析逻辑的结果
- 适合数据修复和完整恢复

### 视频数据库
```bash
python generate_data.py --source video
```
- 直接从结构化数据生成，速度快
- 适合快速批量生成基本文件

## 📂 生成内容

每个视频在 `data/{视频ID}/` 目录下生成：
- `index.html` - 美化的视频展示页面
- `thumbnail.jpg` - 视频缩略图
- `preview.webm` - 预览视频
- `collection_log.txt` - 采集日志

## 💡 使用建议

1. **首次使用**：先运行 `--stats` 查看数据情况
2. **数据恢复**：使用默认HTML源重新生成所有数据
3. **快速预览**：使用 `--limit 10` 测试生成效果
4. **问题调试**：添加 `--verbose` 参数查看详细信息

## 🔧 与app.py的关系

- 这是独立工具，调用app.py的功能模块
- 不影响正常采集流程
- 可以与 `app.py --regenerate` 互补使用

## ❓ 需要帮助？

运行 `python generate_data.py --help` 查看所有参数说明 